<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Тест админ пароля</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      background-color: #1a1a1a;
      color: white;
    }

    .test-section {
      background: #2a2a2a;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
      border: 1px solid #444;
    }

    button {
      background: #7c3aed;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
    }

    button:hover {
      background: #6d28d9;
    }

    .result {
      margin-top: 10px;
      padding: 10px;
      border-radius: 5px;
    }

    .success {
      background: #065f46;
      color: #d1fae5;
    }

    .error {
      background: #7f1d1d;
      color: #fecaca;
    }

    input {
      background: #374151;
      color: white;
      border: 1px solid #6b7280;
      padding: 8px;
      border-radius: 4px;
      margin: 5px;
    }
  </style>
</head>

<body>
  <h1>Тест системы защиты админ панели</h1>

  <div class="test-section">
    <h3>1. Проверка текущего состояния</h3>
    <button onclick="checkPasswordStatus()">Проверить статус пароля</button>
    <div id="status-result" class="result"></div>
  </div>

  <div class="test-section">
    <h3>2. Тест пароля</h3>
    <input type="password" id="password-input" placeholder="Введите пароль" />
    <button onclick="testPassword()">Проверить пароль</button>
    <div id="password-result" class="result"></div>
  </div>

  <div class="test-section">
    <h3>3. Очистка сессии</h3>
    <button onclick="clearSession()">Очистить сессию</button>
    <div id="clear-result" class="result"></div>
  </div>

  <div class="test-section">
    <h3>4. Переход к админ панели</h3>
    <button onclick="goToAdmin()">Перейти к /admin</button>
    <p><small>Откроет админ панель в новой вкладке</small></p>
  </div>

  <script>
    const ADMIN_PASSWORD = 'nemesisN3M3616';

    function checkPasswordStatus() {
      const verified = sessionStorage.getItem('admin_password_verified') === 'true';
      const result = document.getElementById('status-result');
      result.className = 'result ' + (verified ? 'success' : 'error');
      result.textContent = verified ?
        '✅ Пароль верифицирован в текущей сессии' :
        '❌ Пароль не верифицирован';
    }

    function testPassword() {
      const password = document.getElementById('password-input').value;
      const result = document.getElementById('password-result');

      if (password === ADMIN_PASSWORD) {
        sessionStorage.setItem('admin_password_verified', 'true');
        result.className = 'result success';
        result.textContent = '✅ Пароль правильный! Доступ разрешен.';
      } else {
        result.className = 'result error';
        result.textContent = '❌ Неверный пароль. Попробуйте снова.';
      }
    }

    function clearSession() {
      sessionStorage.removeItem('admin_password_verified');
      const result = document.getElementById('clear-result');
      result.className = 'result success';
      result.textContent = '✅ Сессия очищена. Пароль нужно будет ввести заново.';
    }

    function goToAdmin() {
      window.open('http://localhost:5174/admin', '_blank');
    }

    // Проверить статус при загрузке
    checkPasswordStatus();
  </script>
</body>

</html>